!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("angular-esri-loader")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","angular-esri-loader"],t):t((e.ng=e.ng||{},e.ng.angularEsri=e.ng.angularEsri||{}),e.ng.core,e.ng.common,e.angularEsriLoader)}(this,function(e,t,r,i){"use strict";var n=function(){function e(e){this.moduleProvider=e,this.isLoaded=new t.EventEmitter}return e.prototype.loadMap=function(e,t,r){var i=this;return this.moduleProvider.require(["esri/Map","esri/views/MapView"]).then(function(n){var o=n[0],a=n[1],p=new o(e),s=i.extend({},t);s.container||(s.container=r.nativeElement.id),s.map||(s.map=p);var c=new a(s);return i.map=p,i.mapView=c,i.isLoaded.emit(),{map:p,mapView:c}})},e.prototype.loadWebMap=function(e,t,r){var i=this;return this.moduleProvider.require(["esri/views/MapView","esri/WebMap"]).then(function(n){var o=n[0],a=n[1],p=new a(e),s=i.extend({},t);s.container||(s.container=r.nativeElement.id),s.map||(s.map=p);var c=new o(s);return i.map=p,i.mapView=c,i.isLoaded.emit(),{map:p,mapView:c}})},e.prototype.addWidget=function(e,t){this.mapView.ui.add(e,t)},e.prototype.extend=function(e,t){return Object.keys(t).forEach(function(r){e[r]=t[r]}),e},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:a}]},e}(),o={production:!0,arcGisScriptUrl:"https://js.arcgis.com/4.6/",arcGisCssUrl:"http://js.arcgis.com/4.6/esri/css/main.css"},a=function(){function e(e){this.esriLoader=e}return e.prototype.require=function(e){var t=this;return this.esriLoader.load({url:o.arcGisScriptUrl}).then(function(){return t.esriLoader.loadModules(e)})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:i.EsriLoaderService}]},e}(),p=function(){function e(e){this.mapService=e,this.mapViewProperties={},this.mapInit=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.map||this.loadMap()},e.prototype.loadMap=function(){var e,t=this;if(this.mapProperties)e=this.mapService.loadMap(this.mapProperties,this.mapViewProperties,this.mapEl);else{if(!this.webMapProperties)return void console.error("Proper map properties were not provided");e=this.mapService.loadWebMap(this.webMapProperties,this.mapViewProperties,this.mapEl)}e.then(function(e){t.map=e.map,t.mapView=e.mapView,t.mapInit.emit({map:t.map,mapView:t.mapView}),t.mapInit.complete()})},e.decorators=[{type:t.Component,args:[{selector:"esri-map",template:'\n    <div class="map" id="esri-map" #map></div>\n  ',styles:["\n  /* Required CSS for the ArcGIS API for JavaScript */\n  @import '"+o.arcGisCssUrl+"';\n\n  .map {\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n  }\n    "]}]}],e.ctorParameters=function(){return[{type:n}]},e.propDecorators={mapEl:[{type:t.ViewChild,args:["map"]}],mapProperties:[{type:t.Input}],webMapProperties:[{type:t.Input}],mapViewProperties:[{type:t.Input}],mapInit:[{type:t.Output}]},e}(),s=function(){function e(e,t){this.mapService=t,this.el=e.nativeElement}return e.prototype.ngOnInit=function(){var e=this;this.mapService.isLoaded.subscribe(function(){e.mapService.addWidget(e.el,e.position)})},e.decorators=[{type:t.Directive,args:[{selector:"[esri-customWidget]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:n}]},e.propDecorators={position:[{type:t.Input}]},e}(),c=function(){function e(e){this.mapService=e}return e.prototype.ngOnInit=function(){var e=this;this.mapService.isLoaded.subscribe(function(){e.map=e.mapService.map,e.mapView=e.mapService.mapView})},e.prototype.onCheck=function(e,t){t.visible=e.target.checked},e.prototype.onZoomLayer=function(e){this.mapView.goTo(e.fullExtent)},e.decorators=[{type:t.Component,args:[{selector:"esri-layersToggle",template:'\n    <div esri-customWidget [position]="position">\n      \x3c!-- Only display if there is a map and it has layers --\x3e\n      <div *ngIf="map?.layers.length > 0" class="esri-layers-toggle">\n        <div *ngFor="let layer of map.layers.toArray()">\n          <input type="checkbox" [attr.checked]="layer.visible" (click)="onCheck($event, layer)" /> {{layer.title}}\n          <a href="javascript:void(0)" (click)="onZoomLayer(layer)">Zoom</a>\n        </div>\n      </div>\n    </div>\n  ',styles:["\n    .esri-layers-toggle {\n      z-index: 99;\n      background-color: white;\n      border-radius: 8px;\n      padding: 10px;\n      opacity: 0.75;\n    }\n  "]}]}],e.ctorParameters=function(){return[{type:n}]},e.propDecorators={position:[{type:t.Input}]},e}(),u=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,i.EsriLoaderModule],declarations:[p,s,c],exports:[p,s,c],providers:[n,a]}]}],e.ctorParameters=function(){return[]},e}();e.AngularEsriModule=u,e.EsriMapComponent=p,e.EsriModuleProvider=a,Object.defineProperty(e,"__esModule",{value:!0})});