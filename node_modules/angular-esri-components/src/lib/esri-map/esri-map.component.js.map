{"version":3,"file":"esri-map.component.js","sourceRoot":"","sources":["esri-map.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAU,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AACtG,OAAO,EAAE,cAAc,EAAE,MAAM,iBAAiB,CAAC;AACjD,OAAO,EAAE,WAAW,EAAE,MAAM,gCAAgC,CAAC;;IA+B3D,0BAAoB,UAA0B;QAA1B,eAAU,GAAV,UAAU,CAAgB;iCAJS,EAAE;uBAErC,IAAI,YAAY,EAAE;KAEa;IAEnD,mCAAQ,GAAR;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;;YAEb,MAAM,CAAC;SACR;QAED,IAAI,CAAC,OAAO,EAAE,CAAC;KAChB;IAED,kCAAO,GAAP;QAAA,iBAwBC;QAvBC,IAAI,UAAwB,CAAC;;QAG7B,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SAC9F;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACjC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SACpG;QAAC,IAAI,CAAC,CAAC;YACN,OAAO,CAAC,KAAK,CAAC,yCAAyC,CAAC,CAAC;YACzD,MAAM,CAAC;SACR;QAED,UAAU,CAAC,IAAI,CAAC,UAAA,OAAO;YACrB,KAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;YACvB,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;;YAG/B,AADA,gEAAgE;YAChE,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC;gBAChB,GAAG,EAAE,KAAI,CAAC,GAAG;gBACb,OAAO,EAAE,KAAI,CAAC,OAAO;aACtB,CAAC,CAAC;YACH,KAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;SACzB,CAAC,CAAC;KACJ;;gBAhEF,SAAS,SAAC;oBACT,QAAQ,EAAE,UAAU;oBACpB,QAAQ,EAAE,0DAET;oBACD,MAAM,EAAE,CAAC,0EAEE,WAAW,CAAC,YAAY,oGAQhC,CAAE;iBACN;;;;gBAnBQ,cAAc;;;0BAwBpB,SAAS,SAAC,KAAK;kCAEf,KAAK;qCACL,KAAK;sCACL,KAAK;4BAEL,MAAM;;2BA/BT;;SAqBa,gBAAgB","sourcesContent":["import { Component, OnInit, Input, Output, ElementRef, ViewChild, EventEmitter } from '@angular/core';\r\nimport { EsriMapService } from './../core/index';\r\nimport { environment } from '../../environments/environment';\r\n\r\n@Component({\r\n  selector: 'esri-map',\r\n  template: `\r\n    <div class=\"map\" id=\"esri-map\" #map></div>\r\n  `,\r\n  styles: [`\r\n  /* Required CSS for the ArcGIS API for JavaScript */\r\n  @import '${environment.arcGisCssUrl}';\r\n\r\n  .map {\r\n    height: 100%;\r\n    width: 100%;\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n    ` ]\r\n})\r\nexport class EsriMapComponent implements OnInit {\r\n  map: __esri.Map;\r\n  mapView: __esri.MapView;\r\n\r\n  @ViewChild('map') mapEl: ElementRef;\r\n\r\n  @Input() mapProperties: __esri.MapProperties;\r\n  @Input() webMapProperties: __esri.WebMapProperties;\r\n  @Input() mapViewProperties: __esri.MapViewProperties = {};\r\n\r\n  @Output() mapInit = new EventEmitter();\r\n\r\n  constructor(private mapService: EsriMapService) { }\r\n\r\n  ngOnInit() {\r\n    if (this.map) {\r\n      // map is already initialized\r\n      return;\r\n    }\r\n\r\n    this.loadMap();\r\n  }\r\n\r\n  loadMap() {\r\n    let mapPromise: Promise<any>;\r\n\r\n    // determine if loading a WebMap or creating a custom map\r\n    if (this.mapProperties) {\r\n      mapPromise = this.mapService.loadMap(this.mapProperties, this.mapViewProperties, this.mapEl);\r\n    } else if (this.webMapProperties) {\r\n      mapPromise = this.mapService.loadWebMap(this.webMapProperties, this.mapViewProperties, this.mapEl);\r\n    } else {\r\n      console.error('Proper map properties were not provided');\r\n      return;\r\n    }\r\n\r\n    mapPromise.then(mapInfo => {\r\n      this.map = mapInfo.map;\r\n      this.mapView = mapInfo.mapView;\r\n\r\n      // emit event informing application that the map has been loaded\r\n      this.mapInit.emit({\r\n        map: this.map,\r\n        mapView: this.mapView\r\n      });\r\n      this.mapInit.complete();\r\n    });\r\n  }\r\n}\r\n"]}